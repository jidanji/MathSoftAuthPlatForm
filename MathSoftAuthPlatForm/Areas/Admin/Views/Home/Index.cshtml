
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_BackGroud.cshtml";

    ViewBag.Id = "a9999";
}
<style>
    #daiban   a {
        padding: 4px 15px;
    }

    #home,#profile,#messages {
        border-left: 1px solid #ddd;
        border-right: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        padding: 5px;
    }

    .daizhixing {
    background-color:#f7994b;
    }


    #modelView .modal-body h4, #modelStart .modal-body h4 {
        font-family: 'Microsoft YaHei UI';
        font-size: 14px;
        font-weight: 700;
    }
    .text-info {
        color: #646262;
    }

    hr {
        margin-bottom: 8px;
        margin-top: 8px;
    }


    .CommonBg {
        display: flex; /*Flex布局*/
        display: -webkit-flex; /* Safari */
        align-items: center; /*指定垂直居中*/
        min-height: 100px;
    }

    figure {
        margin: 0 auto;
        text-align: center;
    }

        figure p {
            font-weight: 700
        }

    .text-info {
        color: #646262;
    }

    .minHeight100 {
        min-height: 100px;
    }

    .thg {
    cursor:pointer;
    }

    #divXiaoYuan figure, #divLvGuan figure, #divPiaoJu figure {
    border:1px solid #eee;
    }

    #divXiaoYuan div, #divLvGuan div, #divPiaoJu div {
        
    }


    #modelView .modal-body {
    overflow-y:auto;
    overflow-x:hidden;
    }

        #modelView .modal-body::-webkit-scrollbar { /*滚动条整体样式*/
            width: 10px; /*高宽分别对应横竖滚动条的尺寸*/
            height: 10px;
        }

        #modelView .modal-body::-webkit-scrollbar-thumb { /*滚动条里面小方块*/
            border-radius: 5px;
            -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
            background: #333;
        }

        #modelView .modal-body::-webkit-scrollbar-track { /*滚动条里面轨道*/
            -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
            border-radius: 0;
            background: #eee;
        }
</style>
<script>
    var t1 = null,  optype=1;

    function initT1() {
        if (t1) {
            t1.draw(true)
            return;
        }
        t1 = $('#t1').DataTable({
            "bAutoWidth": true,
            "aLengthMenu": [10,15, 20, 50, 100, 200, 500], //更改显示记录数选项
            "iDisplayLength": 15, //默认显示的记录数
            dom: 't<"d"r><"row"<"col-md-2"l><"col-md-2"i><"col-md-8"p>>',
            "processing": true,
            "serverSide": true,
            "sScrollY": $(window).height() - $("#navbar").outerHeight()-120,
            "bSort": false,
            "bPaginate": true, //是否显示（应用）分页器

            "ajax": {
                "url": "GetData",
                datatype: "JSON",
                type:"POST",
                data: function (d) {
                    d.searchBegDate = $('#searchBegDate').val();
                    d.searchEndDate = $('#searchEndDate').val();
                    d.searchStatus = $("#searchStatus").val();
                }
            },
            "columns": [
                { "data": null, width:50 },
               
                {
                    "data": "UserName",
                    width: 60
                },
                {
                    "data": "WorkName",
                    render: function (data, type, row, meta) {
                        return '<a view>' + data + '</a>'
                    },
                    width: 140
                }, 
                {
                    "data": "UserDeptName", width: 70
                },
                {
                    "data": "UserTelNumber"
                },
                {
                    "data": "Fee", width: 100
                },

                {
                    "data": "InfactFee", width: 100,
                    render: function (data, type, row, meta) {
                        var InfactFee = row.InfactFee;
                        var Fee = row.Fee || 0;
                        if (!InfactFee) {
                            return InfactFee;
                        }
                        else if (InfactFee > Fee) {
                            return "<div style='font-weight:800' class='text-danger'>" + InfactFee + '<i class="fa fa-arrow-up" aria-hidden="true"></i>' + "</div>"
                        }
                        else if (InfactFee == Fee) {
                            return "<div style='font-weight:800' class='text-success'>" + InfactFee + "</div>"
                        }
                        else {
                            return "<div style='font-weight:800' class='text-success'>" + InfactFee + '<i class="fa fa-arrow-down" aria-hidden="true"></i>' + "</div>"
                        }
                    }
                },

                {
                    "data": "CreateTime", render: function (data, type, row, meta) {
                        return dateFormate(data)
                    },
                    width: 80
                },

                {
                    "data": "ShenPiRiQi", render: function (data, type, row, meta) {
                        return dateFormate(data)
                    },
                    width: 80
                },
                {
                    "data": "Status",
                    render: function (data, type, row, meta) {
                        var ret = "", retClass = "";
                        if (data == 1) {
                            ret = "新建";
                            retClass = "badgeCreated"
                        }
                        else if (data == 2) {
                            ret = "同意出差"
                            retClass = "badgeComplete"
                        }

                        else if (data == -2) {
                            ret = "部门审批中"
                            retClass = "badgeWaiting"
                        }

                        else if (data == -3) {
                            ret = "招办审批中"
                            retClass = "badgeWaiting"
                        }
                        else if (data == 3) {
                            ret = "审批成功";
                            retClass = "badgeComplete"
                        }

                        else if (data == -1) {
                            ret = "不同意出差";
                            retClass = "badgeProblem"
                        }
                        else if (data == -4) {
                            ret = "不同意";
                            retClass = "badgeProblem"
                        }

                        return '<span class="badge ' + retClass + '">' + ret + '</span>'
                    },
                    'sClass': "text-center"
                },
                {
                    "data": null, render: function (data, type, row, meta) {

                        var a1 = "";
                        //a1 = "<button edit class='btn btn-xs btn-warning'>编辑</button>";
                        var a2 = "";
                        //a2= " <button delete class='btn btn-xs btn-danger'>删除</button>"
                        var a3 = "";
                        //a3=" <button start class='btn btn-xs btn-success'>提交审批</button>"
                        var a4 = "";
                        //a4= " <button renzhipai class='btn btn-xs btn-info'>贴票</button>"
                        var a5 = "";
                        a5 = " <button view  class='btn btn-xs btn-link'>详情</button>"

                        var a6 = "";
                        //a6 = " <button zhongshen  class='btn btn-xs btn-success'>提交终审</button>"
                        if (row.Status == 1) {
                            a1 = "<button edit class='btn btn-xs btn-warning'>编辑</button>";
                            a2 = " <button delete class='btn btn-xs btn-danger'>删除</button>"
                            a3 = " <button start class='btn btn-xs btn-success'>提交部门审批</button>"
                        }
                        else if (row.Status == 2) {
                            a6 = " <button zhongshen  class='btn btn-xs btn-success'>提交招办(终审)</button>"
                            a4 = " <button tiepiao class='btn btn-xs btn-info'>上传图片</button>"
                        }
                        else if (row.Status == -2) {

                        }
                        else if (row.Status == 3) {

                        }

                        else if (row.Status == -3) {

                        }

                        else if (row.Status == -1) {

                        }

                        return a1 + a2 + a3 + a4 + a6 + a5;
                    },
                    'sClass': "text-center",
                    width: 230

                }
            ],
            language: {
                "sProcessing": "正在处理数据...",
                "sLengthMenu": "显示 _MENU_ 项结果",
                "sZeroRecords": "没有匹配结果",
                "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
                "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                "sInfoPostFix": "",
                "sSearch": "搜索:",
                "sUrl": "",
                "sEmptyTable": "表中数据为空",
                "sLoadingRecords": "载入中...",
                "sInfoThousands": ",",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "上页",
                    "sNext": "下页",
                    "sLast": "末页"
                },
                "oAria": {
                    "sSortAscending": ": 以升序排列此列",
                    "sSortDescending": ": 以降序排列此列"
                }
            },
            "fnDrawCallback": function () {
                var api = this.api();
                var startIndex = api.context[0]._iDisplayStart;//获取到本页开始的条数
                api.column(0).nodes().each(function (cell, i) {
                    cell.innerHTML = '<span class="label label-success">' + (startIndex + i + 1) + '</span>'
                });
            }
        });

        $('#t1 tbody').on('click', 'tr', function (e) {
            var selected = $(this).is(".selected")
            if (!selected) {
                $(this).addClass('selected')
            }
            else {
                $(this).removeClass('selected')
            }



        })

        $('#t1 tbody').on("click", 'button[delete]', function (e) {
            e.stopPropagation();

            var tr = $(this).closest('tr');
            var row = t1.row(tr);
            layer.confirm('您确定要删除吗？', {
                btn: ['确定', '取消'] //按钮
            }, function () {

                $.ajax({
                    'url': "DeleteMathWork",
                    data: { "WorkId": row.data().WorkId },
                    success: function (data) {
                        if (data.suc) {
                            layer.msg('删除成功', { icon: 1 })
                            t1.draw(true);
                        }
                        else {
                            layer.msg(data.remark, { icon: 2 })
                        }

                    }
                })
            });



        });

        $('#t1 tbody').on("click", 'button[edit]', function (e) {
            optype = 2;
            e.stopPropagation();
            var tr = $(this).closest('tr');
            var row = t1.row(tr);
            var data = row.data();


            $("#form1").get(0).reset();
            $("#form1").validate().resetForm(); //清除验证

            $("#myModalLabel").html("修改行程申请")
            $('#modelZhong').modal();





            for (var sth in data) {
                $("#" + sth).val(data[sth])
            }

            $('#BegTime').val(dateFormate(data["BegTime"]))
            $('#EndTime').val(dateFormate(data["EndTime"]))



            //弹出编辑框 并
        });

        $('#t1 tbody').on("click", '*[view]', function (e) {

            
            e.stopPropagation();
            var tr = $(this).closest('tr');
            var row = t1.row(tr);
            var data = row.data();


            

            
            $('#modelView').modal();
            $("#modelView .modal-body").height($(window).height()-200)
            $("#modelView .modal-body").animate({
                'scrollTop': 0
            });



            for (var sth in data) {
                $("#Div" + sth).html(data[sth])
            }

            $('#DivBegTime').html(dateFormate(data["BegTime"]))
            $('#DivEndTime').html(dateFormate(data["EndTime"]))


            var HisList = data.HisList;
            $("#tableHis tbody tr").remove();
            $.each(HisList, function (idx, el) {
                $("#tableHis tbody").append("<tr><td>" + (idx + 1) + "</td><td>" + el.ShenPiRen + "</td><td>" + el.ShenPiJianYi + "</td><td>" + el.ShenPiJianRemark + "</td><td>" + datetimeFormate(el.ShenPiDateTime)+"</td></tr>")
            })

            var AttachedMentList = data.AttachedMentList;

            var xiaoyuan = $.grep(AttachedMentList, function (el, index) {
                return el.AttchedType=="校园风光";
            });

            var lvguan = $.grep(AttachedMentList, function (el, index) {
                return el.AttchedType == "旅馆照片";
            });

            var piaoju = $.grep(AttachedMentList, function (el, index) {
                return el.AttchedType == "票据照片";
            });

            var lichengbiao = $.grep(AttachedMentList, function (el, index) {
                return el.AttchedType == "车辆里程表";
            });

            $('#divXiaoYuan,#divLvGuan,#divPiaoJu,#divCheLiangLiChengBiao').empty();

            $(xiaoyuan).each(function (idx, el) {
                $("#divXiaoYuan").append('<div class="col-md-3 col-sm-3 col-xs-3  CommonBg " style="height: 100px;"><figure><img class="thg" src="' + el.AttachedUrl + '" height="80" width="100%"><p>' + el.AttchedRemark+'</p></figure></div >')
            })

            $(lvguan).each(function (idx, el) {
                $("#divLvGuan").append('<div class="col-md-3 col-sm-3 col-xs-3  CommonBg " style="height: 100px;"><figure><img class="thg" src="' + el.AttachedUrl + '" height="80" width="100%"><p>' + el.AttchedRemark + '</p></figure></div >')
            })

            $(piaoju).each(function (idx, el) {
                $("#divPiaoJu").append('<div class="col-md-3 col-sm-3 col-xs-3  CommonBg " style="height: 100px;"><figure><img class="thg" src="' + el.AttachedUrl + '" height="80" width="100%"><p>' + el.AttchedRemark + '</p></figure></div >')
            })

            $(lichengbiao).each(function (idx, el) {
                $("#divCheLiangLiChengBiao").append('<div class="col-md-3 col-sm-3 col-xs-3  CommonBg " style="height: 100px;"><figure><img class="thg" src="' + el.AttachedUrl + '" height="80" width="100%"><p>' + el.AttchedRemark + '</p></figure></div >')
            })



            //弹出编辑框 并
          
        });

        $('#t1 tbody').on("click", "*[start]", function (e) {
            var tr = $(this).closest('tr');
            var row = t1.row(tr);
            var data = row.data();

            layer.confirm('您确定要提交吗？', {
                btn: ['确定', '取消'] //按钮
            }, function () {

                $.ajax({
                    'url': "Send2SHengPi",
                    data: { "WorkId": row.data().WorkId },
                    success: function (data) {
                        if (data.suc) {
                            layer.msg('提交成功', { icon: 1 })
                            t1.draw(true);
                        }
                        else {
                            layer.msg(data.remark, { icon: 2 })
                        }

                    }
                })
            });

        })

        $('#t1 tbody').on("click", "*[zhongshen]", function (e) {
            var tr = $(this).closest('tr');
            var row = t1.row(tr);
            var data = row.data();
            $("#form2").get(0).reset();
            $("#form2").validate().resetForm(); //清除验证
            $("#SendWorkId").val(data.WorkId);
            $("#InfactFee").val(data.InfactFee);
            $("#modelStart").modal();
        })


        $("#t1 tbody").on("click", "*[tiepiao]", function () {
            var tr = $(this).closest('tr');
            var row = t1.row(tr);
            var data = row.data();
            $("#FileWorkId").val(data.WorkId)
            $("#modelTiePiao").modal()
        })
    }

 

    $(document).ready(function () {

        $("#BtnDaoChuExcel").click(function () {
            location.href = '@Url.Content("~/Excel/GetData")' + "?R=" + Math.random() * 10000
                + "&searchBegDate=" + $('#searchBegDate').val()
                + "&searchEndDate=" + $("#searchEndDate").val()
                + "&searchStatus=" + $("#searchStatus").val()

        });

        $('#btnSearch').click(function () {
            t1.draw(true);
        })

        $(document).on("click", "*.thg ", function () {
            var src = $(this).attr("src")
            window.open(src)
        })
      
        initT1();

        setInterval(function () {
            t1.draw(true);
        }, 1000*60*2)

       

        $("#btnNew").click(function () {
            optype = 1;
            $("#form1").get(0).reset();
            $("#form1").validate().resetForm(); //清除验证
            $("#myModalLabel").html("新建行程申请")
            $("#modelZhong").modal();
        })

        $("#form1").validate({
            rules: {
                WorkName: {
                    required: true
                },
                Fee: {
                    positiveinteger: true
                }
            },
            submitHandler: function (form) {
                var data = $(form).serialize();
                $("#modelLoad").modal();
                if (optype === 1) {
                    $.ajax({
                        url: "AddMathWork",
                        data: $(form).serialize(),
                        success: function (data) {
                            $("#modelLoad").modal("hide");
                            if (data.suc) {
                                layer.msg('新建成功', { icon: 1 })
                                $('#modelZhong').modal('hide');
                                t1.draw(true);
                            }
                            else {
                                layer.msg(data.remark, { icon: 2 })
                            }
                        },
                        dataType: "JSON",
                        type: "POST"
                    })
                }
                else {

                    $.ajax({
                        url: "UpdateMathWork",
                        data: $(form).serialize(),
                        success: function (data) {
                            $("#modelLoad").modal("hide");
                            if (data.suc) {
                                layer.msg('更新成功', { icon: 1 })
                                $('#modelZhong').modal('hide');
                                t1.draw(false);
                            }
                            else {
                                layer.msg(data.remark, { icon: 2 })
                            }
                        },
                        dataType: "JSON",
                        type: "POST"
                    })

                }
            }



        });


        $("#form2").validate({
            rules: {
                InfactFee: {
                    positiveinteger: true
                }
            },
            submitHandler: function (form) {

                var data = $(form).serialize();
                $("#modelLoad").modal();
                    $.ajax({
                        url: "Send3SHengPi",
                        data: $(form).serialize(),
                        success: function (data) {
                            $("#modelLoad").modal("hide");
                            if (data.suc) {
                                layer.msg('提交成功', { icon: 1 })
                                $("#modelStart").modal("hide");
                                t1.draw(false);
                            }
                            else {
                                layer.msg(data.remark, { icon: 2 })
                            }
                        },
                        dataType: "JSON",
                        type: "POST"
                    })

              
            }



        });

        $("#formUpload").validate({
            rules: {
            },
            submitHandler: function (form) {
                var formData = new FormData();

                formData.append("AttchedType", $("#AttchedType").val());
                formData.append("FileWorkId", $("#FileWorkId").val());
                formData.append("AttchedRemark", $("#AttchedRemark").val())
                var AttachedUrl = document.getElementById("AttachedUrl").files[0];
                formData.append("AttachedUrl", AttachedUrl);
                $("#modelLoad").modal();
                $.ajax({
                    type: "POST",
                    url: "UpLoadFile",
                    data: formData,
                    dataType: "JSON",
                    cache: false,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        $("#modelLoad").modal("hide");
                        if (data.suc) {
                            layer.msg('上传成功', { icon: 1 })
                            $("#formUpload").get(0).reset();
                            $("#formUpload").validate().resetForm(); //清除验证
                            t1.draw(false);
                        }
                        else {
                            layer.msg(data.remark, { icon: 2 })
                        }
                    },
                    dataType: "JSON",
                    type: "POST"
                })
            }
        });

        $('.CommonBg').each(function (idx, el) {
            $(el).height($(el).next().height())
        });

        $('#modelView').on('shown.bs.modal', function (e) {
            $('.CommonBg').each(function (idx, el) {
                $(el).height($(el).next().height())
            });
        })


        laydate.render({
            elem: '#BegTime' //指定元素
        });

        laydate.render({
            elem: '#EndTime' //指定元素
        });

        laydate.render({
            elem: '#searchBegDate' //指定元素
        });

        laydate.render({
            elem: '#searchEndDate' //指定元素
        });

       

        


      

        jQuery.validator.addMethod("positiveinteger", function (value, element) {

            //    var tel = /^-?\d+$/g;  //正、负 整数 + 0

            //    return this.optional(element) || (tel.test(value));

            //}, "请输入正整数"); 

            var aint = parseInt(value);
            return aint >= 0 && (aint + "") == value;
        }, "请输入非负数");


    })
</script>
<div>

    <div class="row" id="navbar">
        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3"  style="padding-right:0">
            <div class="input-group  input-group-sm  ">
                <span class="input-group-addon" id="basic-addon1">审批日期</span>
                <input type="text"
                       placeholder="开始日期"
                       id="searchBegDate" name="searchBegDate" class="form-control" aria-describedby="basic-addon1">
            </div>
        </div>

        <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 form-group-sm" style="padding-left:0">
            
                <input type="text"
                       placeholder="结束日期"
                       id="searchEndDate" name="searchEndDate" class="form-control " aria-describedby="basic-addon1">
         
        </div>

        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
            <div class="input-group  input-group-sm  ">
                <span class="input-group-addon" id="basic-addon1">审批状态</span>
                <select id="searchStatus" name="searchStatus" class="form-control">
                    <option value="">--请选择审批状态--</option>
                    <option value="1">新建</option>
                    <option value="-2">部门审批中</option>
                    <option value="2">同意出差</option>
                    <option value="-1">不同意出差</option>
                    <option value="-3">招办审批中</option>
                    <option value="3">审批成功</option>
                    <option value="-4">不同意</option>

                </select>
            </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
            <button type="button" class="btn btn-primary btn-sm" id="btnSearch">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                &nbsp;
                查询
            </button>

            <button type="button" id="btnNew" class="btn btn-success btn-sm " style="padding: 2px 10px;">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 新建出差申请
            </button>


            <a   id="BtnDaoChuExcel" class="btn btn-default btn-sm " style="padding: 2px 10px;">
                <span class="fa fa-file-excel-o" aria-hidden="true"></span> 导出

            </a>
        </div>
    </div>

   


    <table class="table table-bordered table-striped" id="t1">
        <thead>
            <tr>
                <th>序号</th>
                <th>申请人</th>
                <th>事件</th>
                <th>部门</th>
                <th>电话</th>
                <th>计划费用(元)</th>
                <th>实际费用(元)</th>
                <th>发起日期</th>
                <th>审批日期</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
        </thead>

    </table>




    <div aria-hidden="true" data-backdrop="static" class="modal fade" id="modelZhong" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <form class="form-horizontal" id="form1">
                    <input type="hidden" id="RoleId" name="RoleId" />
                    <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">  <i class="glyphicon glyphicon-remove-circle"></i></button>
                        <h4 class="modal-title" id="myModalLabel">新建行程申请</h4>
                    </div>
                    <div class="modal-body">
                        <input id="WorkId" name="WorkId" type="hidden" />
                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputSmall"><font style="color:red">*</font>&nbsp;申请名称 </label>
                            <div class="col-sm-4">
                                <input type="text"
                                       id="WorkName"
                                       required name="WorkName"
                                       class="form-control" placeholder="申请名称" />
                            </div>

                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red">*</font>&nbsp;交通方式
                            </label>
                            <div class="col-sm-4">
                                <select required class="form-control" id="JiaotongFangshi" name="JiaotongFangshi">
                                    <option value="">--请选择交通方式--</option>
                                    <option value="自驾">自驾</option>
                                    <option value="乘车">乘车</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputSmall"><font style="color:red">*</font>&nbsp;出差地点 </label>
                            <div class="col-sm-4">
                                <input type="text"
                                       id="Target"
                                       required name="Target"
                                       class="form-control" placeholder="出差地点" />
                            </div>

                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red">*</font>&nbsp;去往中学
                            </label>
                            <div class="col-sm-4">
                                <input type="text"
                                       id="ShoolName"
                                       required name="ShoolName"
                                       class="form-control" placeholder="去往中学" />
                            </div>
                        </div>

                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputSmall"><font style="color:red">*</font>&nbsp;约见人员 </label>
                            <div class="col-sm-4">
                                <input type="text"
                                       id="PointWho"
                                       required name="PointWho"
                                       class="form-control" placeholder="约见人员" />
                            </div>

                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red">*</font>&nbsp;约见人员电话
                            </label>
                            <div class="col-sm-4">
                                <input type="text"
                                       id="PointWhoNumber"
                                       required name="PointWhoNumber"
                                       class="form-control" placeholder="约见人员电话" />
                            </div>
                        </div>

                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red">*</font>&nbsp;
                                开始时间
                            </label>
                            <div class="col-sm-4">
                                <input type="text"
                                       id="BegTime"
                                       required name="BegTime"
                                       class="form-control" placeholder="开始时间" />
                            </div>

                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red">*</font>&nbsp;结束时间
                            </label>
                            <div class="col-sm-4">
                                <input type="text"
                                       id="EndTime"
                                       required name="EndTime"
                                       class="form-control" placeholder="结束时间" />
                            </div>
                        </div>

                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red">*</font>&nbsp;
                                计划费用
                            </label>
                            <div class="col-sm-10">
                                <input type="text"
                                       id="Fee"
                                       required name="Fee"
                                       class="form-control" maxlength="9" placeholder="计划费用,数据范围0-999999999" />
                            </div>


                        </div>



                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputLarge">申请说明</label>
                            <div class="col-sm-10">
                                <textarea id="Remark" name="Remark" placeholder="申请说明" class="form-control" rows="2"></textarea>
                            </div>


                        </div>




                    </div>
                    <div class="modal-footer">



                        <button type="submit" class="btn btn-primary btn-sm">
                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                            保存
                        </button>



                        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                            关闭
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <div aria-hidden="true" data-backdrop="static" class="modal fade" id="modelView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <form class="form-horizontal" id="form3">
                    <input type="hidden" id="RoleId" name="RoleId" />
                    <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">  <i class="glyphicon glyphicon-remove-circle"></i></button>
                        <h4 class="modal-title" id="myModalLabel">行程申请详情</h4>
                    </div>
                    <div class="modal-body">
                        <input id="WorkId" name="WorkId" type="hidden" />

                        <div class="row">
                            <div class="col-md-3 col-sm-3 col-xs-3 CommonBg">

                                <figure>


                                    <img src="~/Content/Images/nantianjibenxinxi.png" height="40" width="40" />
                                    <p>基本信息</p>
                                </figure>
                            </div>
                            <div class="col-md-9 col-sm-9 col-xs-9  minHeight100">
                                <div class="row">
                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>申请名称</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivWorkName">未指定</h4></div>

                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>交通方式</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivJiaotongFangshi">未指定</h4></div>



                                </div>

                                <div class="row">

                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>出差地点</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivTarget">未指定</h4></div>

                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4> 去往中学</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivShoolName">未指定</h4></div>


                                </div>

                                <div class="row">
                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>约见人员</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivPointWho">未指定</h4></div>

                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>约见人员电话</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivPointWhoNumber">未指定</h4></div>


                                </div>


                                <div class="row">
                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>开始时间</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivBegTime">未指定</h4></div>

                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>结束时间</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivEndTime">未指定</h4></div>


                                </div>

                                <div class="row">
                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>计划费用</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 id="DivFee">未指定</h4></div>

                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4 style="color:green">实际费用</h4></div>
                                    <div class="col-md-4 col-sm-4 col-xs-4 text-left text-info"><h4 style="color:green" id="DivInfactFee">未指定</h4></div>

                                </div>

                                <div class="row">



                                    <div class="col-md-2 col-sm-2 col-xs-2 text-right"><h4>申请说明</h4></div>
                                    <div class="col-md-10 col-sm-10 col-xs-10 text-left text-info"><h4 id="DivRemark">未指定</h4></div>



                                </div>






                            </div>

                        </div>

                        <hr class="row" />
                        <div class="row">
                            <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                <figure>


                                    <img src="~/Content/Images/nantianguifan.png" height="40" width="40" />
                                    <p>审批历史</p>
                                </figure>
                            </div>
                            <div class="col-md-9 col-sm-9 col-xs-9 minHeight100" id="tableHis">
                                <table class="table table-striped table-bordered table-responsive">
                                    <thead>
                                        <tr>
                                            <th>序号</th>
                                            <th>审批人</th>
                                            <th>审批意见</th>
                                            <th>审批详情</th>
                                            <th>审批时间</th>
                                        </tr>
                                    </thead>

                                    <tbody></tbody>
                                </table>
                            </div>

                        </div>

                        <hr class="row" />
                        <div class="row">
                            <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                <figure>


                                    <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                    <p>车辆里程表</p>
                                </figure>
                            </div>
                            <div class="col-md-9 col-sm-9 col-xs-9 minHeight100" id="divCheLiangLiChengBiao">
                                <h3 class="text-center text-warning">没有图片</h3>
                            </div>

                        </div>

                        <hr class="row" />
                        <div class="row">
                            <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                <figure>


                                    <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                    <p>校园风光</p>
                                </figure>
                            </div>
                            <div class="col-md-9 col-sm-9 col-xs-9 minHeight100" id="divXiaoYuan">
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>

                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>

                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                    <figure>


                                        <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                        <p>校园风光</p>
                                    </figure>
                                </div>
                            </div>

                        </div>

                        <hr class="row" />
                        <div class="row">
                            <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                <figure>


                                    <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                    <p>旅馆照片</p>
                                </figure>
                            </div>
                            <div class="col-md-9 col-sm-9 col-xs-9 minHeight100" id="divLvGuan">
                                <h3 class="text-center text-warning">没有图片</h3>
                            </div>

                        </div>

                        <hr class="row" />
                        <div class="row">
                            <div class="col-md-3 col-sm-3 col-xs-3  CommonBg  ">
                                <figure>


                                    <img src="~/Content/Images/nantianip.png" height="40" width="40" />
                                    <p>票据照片</p>
                                </figure>
                            </div>
                            <div class="col-md-9 col-sm-9 col-xs-9 minHeight100" id="divPiaoJu">
                                <h3 class="text-center text-warning">没有图片</h3>
                            </div>

                        </div>













                    </div>
                    <div class="modal-footer">







                        <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                            关闭
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <div aria-hidden="true" data-backdrop="static" class="modal fade " id="modelStart" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form class="form-horizontal" id="form2">
                    <input type="hidden" id="SendWorkId" name="SendWorkId" />
                    <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">  <i class="glyphicon glyphicon-remove-circle"></i></button>
                        <h4 class="modal-title" id="myModalLabel">提交审批</h4>
                    </div>
                    <div class="modal-body" style="overflow:auto">
                        <div class="row">


                            <div class="col-md-4 col-sm-4 col-xs-4 text-right"><h4>实际报销金额</h4></div>
                            <div class="col-md-6 col-sm-6 col-xs-6 text-left text-info">
                                <input id="InfactFee" type="text" class="form-control" required name="InfactFee" />
                            </div>

                        </div>

                    </div>
                    <div class="modal-footer">



                        <button type="submit" class="btn btn-primary btn-sm">
                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                            提交审批
                        </button>



                        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                            关闭
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <div aria-hidden="true" data-backdrop="static" class="modal fade " id="modelTiePiao" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form class="form-horizontal" id="formUpload">
                    <input type="hidden" id="FileWorkId" name="FileWorkId" />
                    <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">  <i class="glyphicon glyphicon-remove-circle"></i></button>
                        <h4 class="modal-title" id="myModalLabel">上传图片</h4>
                    </div>
                    <div class="modal-body" style="overflow:auto">
                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red">*</font>&nbsp;
                                图片类型
                            </label>
                            <div class="col-sm-10">

                                <select required class="form-control" id="AttchedType" name="AttchedType">
                                    <option value="">--请选择图片类型--</option>
                                    <option value="车辆里程表">车辆里程表</option>
                                    <option value="校园风光">校园风光</option>
                                    <option value="旅馆照片">旅馆照片</option>
                                    <option value="票据照片">票据照片</option>

                                </select>

                            </div>


                        </div>

                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red">*</font>&nbsp;上传文件
                            </label>
                            <div class="col-sm-10">
                                <input id="AttachedUrl"
                                       required
                                       name="AttachedUrl" accept="image/gif,image/jpeg,image/jpg,image/png,image/bmp" type="file" class="form-control" />
                            </div>


                        </div>

                        <div class="form-group form-group-sm row">
                            <label class="col-sm-2  control-label" for="formGroupInputSmall">
                                <font style="color:red"></font>&nbsp;图片描述
                            </label>
                            <div class="col-sm-10">
                                <textarea id="AttchedRemark" name="AttchedRemark" rows="10" cols="20"
                                          class="form-control"></textarea>
                            </div>


                        </div>

                    </div>
                    <div class="modal-footer">



                        <button type="submit" class="btn btn-primary btn-sm">
                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                            上传图片
                        </button>



                        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                            关闭
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>


 







</div>

